__NUXT_JSONP__("/en/blog/tag/nuxtjs", (function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_,$,aa,ab,ac,ad,ae,af,ag,ah,ai,aj,ak,al,am,an,ao,ap,aq,ar,as,at,au,av,aw,ax,ay,az,aA,aB,aC,aD,aE,aF,aG,aH,aI,aJ,aK,aL,aM,aN,aO,aP,aQ,aR,aS,aT,aU,aV,aW,aX,aY,aZ,a_,a$,ba,bb,bc,bd,be,bf,bg,bh,bi,bj,bk,bl,bm,bn,bo,bp,bq,br,bs,bt,bu,bv,bw,bx,by,bz,bA,bB,bC,bD,bE,bF,bG,bH,bI,bJ,bK,bL,bM,bN,bO,bP,bQ,bR,bS,bT,bU,bV,bW,bX,bY,bZ,b_,b$,ca,cb,cc,cd,ce,cf,cg,ch,ci,cj,ck,cl,cm,cn,co,cp,cq,cr,cs,ct,cu,cv,cw,cx,cy,cz,cA,cB){return {data:[{articles:[{slug:"challenges-with-switching-to-pinia",description:"Why we are staying with Vuex instead of switching to Pinia for state management",title:"Challenges with switching to Pinia.",img:"https:\u002F\u002Fpinia.vuejs.org\u002Flogo.svg",alt:"Challenges with switching to Pinia for state management",author:{name:aD,slug:aE,bio:aF,img:aG},createdAt:aH,updatedAt:aH,tags:[af,aI],toc:[{id:aJ,depth:L,text:aK},{id:aL,depth:L,text:aM},{id:aN,depth:Q,text:aO},{id:aP,depth:Q,text:aQ},{id:aR,depth:Q,text:aS},{id:aT,depth:L,text:aU},{id:aV,depth:Q,text:aW},{id:aX,depth:L,text:aY},{id:aZ,depth:L,text:a_},{id:a$,depth:Q,text:ba},{id:bb,depth:L,text:bc},{id:bd,depth:L,text:be}],body:{type:al,children:[{type:b,tag:g,props:{},children:[{type:a,value:"Upgrading dependencies can be hit and miss. Sometimes it's a breeze; type in "},{type:b,tag:h,props:{},children:[{type:a,value:"yarn upgrade"}]},{type:a,value:", your dependencies update to the latest version, and nothing breaks."}]},{type:a,value:f},{type:b,tag:g,props:{},children:[{type:a,value:"Sometimes it is not as simple as updating a dependency; sometimes the newest version of the system you are using makes so many changes that it breaks your entire system."}]},{type:a,value:f},{type:b,tag:g,props:{},children:[{type:a,value:"This is the challenge I faced when given the task to update our frontend dependencies. Specifically, updating Nuxt from version two to version three. During this process, I found that the new version of Nuxt prefers users to use Pinia instead of Vuex."}]},{type:a,value:f},{type:b,tag:M,props:{id:aJ},children:[{type:b,tag:l,props:{href:"#what-is-pinia",ariaHidden:q,tabIndex:r},children:[{type:b,tag:c,props:{className:[s,t]},children:[]}]},{type:a,value:aK}]},{type:a,value:f},{type:b,tag:g,props:{},children:[{type:a,value:"Pinia is a state management system that is similar to Vuex for Vue.js apps. It works in Vue 2 and above."}]},{type:a,value:f},{type:b,tag:M,props:{id:aL},children:[{type:b,tag:l,props:{href:"#why-pinia",ariaHidden:q,tabIndex:r},children:[{type:b,tag:c,props:{className:[s,t]},children:[]}]},{type:a,value:aM}]},{type:a,value:f},{type:b,tag:g,props:{},children:[{type:a,value:"Nuxt is promoting Pinia as the system they will be supporting starting with Nuxt Bridge and Nuxt Three. However, Vuex is still useable, just not suggested."}]},{type:a,value:f},{type:b,tag:g,props:{},children:[{type:a,value:"More importantly, Vuex itself has stated that Pinia is the new default. You can read about it in "},{type:b,tag:l,props:{href:bf,rel:[D,E,F],target:G},children:[{type:a,value:bf}]},{type:a,value:" in their Introduction page. In it, they state that Pinia has almost the same API as Vuex 5, just under a different name."}]},{type:a,value:f},{type:b,tag:g,props:{},children:[{type:a,value:"In "},{type:b,tag:U,props:{},children:[{type:a,value:"practice"}]},{type:a,value:" the Pinia API is still pretty different, at least for Epigno's use case."}]},{type:a,value:f},{type:b,tag:R,props:{id:aN},children:[{type:b,tag:l,props:{href:"#migration-guide",ariaHidden:q,tabIndex:r},children:[{type:b,tag:c,props:{className:[s,t]},children:[]}]},{type:a,value:aO}]},{type:a,value:f},{type:b,tag:g,props:{},children:[{type:a,value:"The migration guide is here, if you wish to use it for reference: "},{type:b,tag:l,props:{href:bg,rel:[D,E,F],target:G},children:[{type:a,value:bg}]}]},{type:a,value:f},{type:b,tag:R,props:{id:aP},children:[{type:b,tag:l,props:{href:"#post-installation-bug",ariaHidden:q,tabIndex:r},children:[{type:b,tag:c,props:{className:[s,t]},children:[]}]},{type:a,value:aQ}]},{type:a,value:f},{type:b,tag:g,props:{},children:[{type:a,value:"Immediately after installing the "},{type:b,tag:h,props:{},children:[{type:a,value:am}]},{type:a,value:" dependency, I ran into "},{type:b,tag:h,props:{},children:[{type:a,value:V}]},{type:a,value:" errors:"}]},{type:a,value:f},{type:b,tag:u,props:{className:[v]},children:[{type:b,tag:w,props:{className:[x,H]},children:[{type:b,tag:h,props:{},children:[{type:a,value:"ERROR  Failed to compile with 21 errors\n\nCan't import the named export 'Vue2' from non EcmaScript module (only default export is available)\n\n...\n\n"}]}]}]},{type:a,value:f},{type:b,tag:g,props:{},children:[{type:a,value:"This isn't "},{type:b,tag:U,props:{},children:[{type:a,value:"supposed"}]},{type:a,value:" to happen, but I also wasn't surprised. We're trying to replace Vuex with a completely different system, so there are bound to be problems."}]},{type:a,value:f},{type:b,tag:g,props:{},children:[{type:a,value:"Other developers have encountered the same problem, as seen here: "},{type:b,tag:l,props:{href:bh,rel:[D,E,F],target:G},children:[{type:a,value:bh}]}]},{type:a,value:f},{type:b,tag:g,props:{},children:[{type:a,value:"This appears to be a problem with Webpack 4. This is documented in the Pinia Cookbook here: "},{type:b,tag:l,props:{href:bi,rel:[D,E,F],target:G},children:[{type:a,value:bi}]}]},{type:a,value:f},{type:b,tag:g,props:{},children:[{type:a,value:"The only solution is to add this "},{type:b,tag:h,props:{},children:[{type:a,value:"rule"}]},{type:a,value:" to the "},{type:b,tag:h,props:{},children:[{type:a,value:"nuxt.config"}]},{type:a,value:" file:"}]},{type:a,value:f},{type:b,tag:u,props:{className:[v]},children:[{type:b,tag:w,props:{className:[x,H]},children:[{type:b,tag:h,props:{},children:[{type:a,value:"rules: [\n      {\n        test: \u002F\\.mjs$\u002F,\n        include: \u002Fnode_modules\u002F,\n        type: 'javascript\u002Fauto',\n      },\n    ],\n"}]}]}]},{type:a,value:f},{type:b,tag:g,props:{},children:[{type:a,value:"What was not mentioned is that there may be other import errors. In our case, I also needed to add "},{type:b,tag:h,props:{},children:[{type:a,value:"\u002F.nuxt\u002F"}]},{type:a,value:" to this ruleset. Because this is due to Webpack 4, I'm guessing (and only guessing) that upgrading to Webpack 5 would fix these import issues."}]},{type:a,value:f},{type:b,tag:R,props:{id:aR},children:[{type:b,tag:l,props:{href:"#composition-api-and-why-its-required",ariaHidden:q,tabIndex:r},children:[{type:b,tag:c,props:{className:[s,t]},children:[]}]},{type:a,value:aS}]},{type:a,value:f},{type:b,tag:g,props:{},children:[{type:a,value:"The Epital project does not use Vue's Composition API; instead we use the Options API. This isn't necessarily by preference, it just happens to be what Epital has already been using when I came on board."}]},{type:a,value:f},{type:b,tag:g,props:{},children:[{type:b,tag:h,props:{},children:[{type:a,value:am}]},{type:a,value:" actually "},{type:b,tag:U,props:{},children:[{type:a,value:"requires"}]},{type:a,value:" the Composition API as a dependency. Personally, I feel like this is a waste of resources if you do not already use the Composition API. Here at Epigno, our frontend app uses the Options API. However, Pinia does requires it and one would be required to include it as a dependency."}]},{type:a,value:f},{type:b,tag:g,props:{},children:[{type:a,value:"If you decide to use Pinia in your project, keep in mind that the Pinia documentation assumes you are utilizing the Composition API."}]},{type:a,value:f},{type:b,tag:M,props:{id:aT},children:[{type:b,tag:l,props:{href:"#pinia-is-not-necessarily-better-than-vuex",ariaHidden:q,tabIndex:r},children:[{type:b,tag:c,props:{className:[s,t]},children:[]}]},{type:a,value:aU}]},{type:a,value:f},{type:b,tag:g,props:{},children:[{type:a,value:"While converting two of our stores from Vuex to Pinia, I came across a few issues with the Pinia API. However, let's focus on the positive first."}]},{type:a,value:f},{type:b,tag:R,props:{id:aV},children:[{type:b,tag:l,props:{href:"#creating-a-store-uses-less-code",ariaHidden:q,tabIndex:r},children:[{type:b,tag:c,props:{className:[s,t]},children:[]}]},{type:a,value:aW}]},{type:a,value:f},{type:b,tag:g,props:{},children:[{type:a,value:"Using Vuex:"}]},{type:a,value:f},{type:b,tag:u,props:{className:[v]},children:[{type:b,tag:w,props:{className:[x,Z]},children:[{type:b,tag:h,props:{},children:[{type:b,tag:c,props:{className:[d,P]},children:[{type:a,value:"\u002F\u002F profile.js"}]},{type:a,value:N},{type:b,tag:c,props:{className:[d,j,J]},children:[{type:a,value:aa}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:K}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,an,B]},children:[{type:a,value:ab}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:y}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:z}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:A}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,ag,k]},children:[{type:a,value:_}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:z}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:bj},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:O}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:bk},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:O}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:A}]},{type:a,value:N},{type:b,tag:c,props:{className:[d,j,J]},children:[{type:a,value:aa}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:K}]},{type:a,value:bl},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:y}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:I},{type:b,tag:c,props:{className:[d,an,B]},children:[{type:a,value:bm}]},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:O}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,S]},children:[{type:a,value:ab}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,ag,k]},children:[{type:a,value:_}]},{type:a,value:bn},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,C]},children:[{type:a,value:W}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:I},{type:b,tag:c,props:{className:[d,an,B]},children:[{type:a,value:"getOptions"}]},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:O}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,S]},children:[{type:a,value:ab}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,ag,k]},children:[{type:a,value:_}]},{type:a,value:bn},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,C]},children:[{type:a,value:ah}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:N},{type:b,tag:c,props:{className:[d,j,J]},children:[{type:a,value:aa}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:K}]},{type:a,value:" actions "},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:y}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:I},{type:b,tag:c,props:{className:[d,P]},children:[{type:a,value:"\u002F\u002F This is retrieving data from a different store"}]},{type:a,value:I},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:bo}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,B]},children:[{type:a,value:bp}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:z}]},{type:a,value:X},{type:b,tag:c,props:{className:[d,S]},children:[{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:" commit"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:bq},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:" rootGetters "},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:X},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:br},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:y}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,bs]},children:[{type:a,value:bt}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:y}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]}]},{type:a,value:I},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:A}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:ao},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:K}]},{type:a,value:bu},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:y}]},{type:a,value:" rootGetters"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:ap}]},{type:b,tag:c,props:{className:[d,T]},children:[{type:a,value:"'surveys'"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:aq}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,ai,B,C]},children:[{type:a,value:bv}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:z}]},{type:b,tag:c,props:{className:[d,S]},children:[{type:a,value:"s"}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,ag,k]},children:[{type:a,value:_}]},{type:a,value:bw},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,C]},children:[{type:a,value:"userId"}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:bx}]},{type:a,value:bq},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,C]},children:[{type:a,value:bm}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,C]},children:[{type:a,value:by}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:A}]},{type:a,value:X},{type:b,tag:c,props:{className:[d,j,bz]},children:[{type:a,value:ar}]},{type:a,value:" userSurvey\n  "},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:N},{type:b,tag:c,props:{className:[d,j,J]},children:[{type:a,value:aa}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:K}]},{type:a,value:" mutations "},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:y}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:I},{type:b,tag:c,props:{className:[d,B]},children:[{type:a,value:bA}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:z}]},{type:b,tag:c,props:{className:[d,S]},children:[{type:a,value:ab},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:" user"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:A}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:"\n    state"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,C]},children:[{type:a,value:W}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:y}]},{type:a,value:" user\n  "},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:bB},{type:b,tag:c,props:{className:[d,B]},children:[{type:a,value:bC}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:z}]},{type:b,tag:c,props:{className:[d,S]},children:[{type:a,value:ab},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:" payload"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:A}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:X},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:K}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:bD},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:bE},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:y}]},{type:a,value:" payload\n    state"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,C]},children:[{type:a,value:ah}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:ap}]},{type:a,value:bF},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:aq}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:y}]},{type:a,value:" value\n  "},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:g,props:{},children:[{type:a,value:"Using Pinia, we can remove the "},{type:b,tag:h,props:{},children:[{type:a,value:bG}]},{type:a,value:" block and replace mutations with the actions block:"}]},{type:a,value:f},{type:b,tag:u,props:{className:[v]},children:[{type:b,tag:w,props:{className:[x,"language-ts"]},children:[{type:b,tag:h,props:{},children:[{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:V}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:" defineStore "},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:Y}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,T]},children:[{type:a,value:bH}]},{type:a,value:N},{type:b,tag:c,props:{className:[d,P]},children:[{type:a,value:"\u002F\u002F When using Vuex alongside Pinia, we have to import the store"}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:V}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:bl},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:"as"}]},{type:a,value:" surveyState "},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:Y}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,T]},children:[{type:a,value:"'~\u002Fstore\u002Fsurvey'"}]},{type:a,value:N},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:"interface"}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,"class-name"]},children:[{type:a,value:"State"}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:bj},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:O}]},{type:a,value:bI},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:bk},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:O}]},{type:a,value:bI},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:N},{type:b,tag:c,props:{className:[d,P]},children:[{type:a,value:"\u002F\u002F `profile` is the ID for the store. We'll get back to this later"}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:aa}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:K}]},{type:a,value:bJ},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:y}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,B]},children:[{type:a,value:"defineStore"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:z}]},{type:b,tag:c,props:{className:[d,T]},children:[{type:a,value:"'profile'"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:"\n  state"},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:O}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:z}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:A}]},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:O}]},{type:a,value:" State "},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:_}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:z}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:"\n    user"},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:O}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:"\n    options"},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:O}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:I},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:A}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:"\n\n  actions"},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:O}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:X},{type:b,tag:c,props:{className:[d,P]},children:[{type:a,value:"\u002F\u002F mutations can now become actions. Instead of `state` as the first argument, use `this`"}]},{type:a,value:X},{type:b,tag:c,props:{className:[d,B]},children:[{type:a,value:bA}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:z}]},{type:a,value:W},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:A}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:aj},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:ac}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:"user "},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:y}]},{type:a,value:" user\n    "},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:ao},{type:b,tag:c,props:{className:[d,B]},children:[{type:a,value:bC}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:z}]},{type:a,value:"payload"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:A}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:aj},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:K}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:bD},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:bE},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:y}]},{type:a,value:" payload\n      "},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:ac}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:ah},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:ap}]},{type:a,value:bF},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:aq}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:y}]},{type:a,value:" value\n    "},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:ao},{type:b,tag:c,props:{className:[d,P]},children:[{type:a,value:"\u002F\u002F Now we can get rid of the rootGetters and getters functions!"}]},{type:a,value:X},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:bo}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,B]},children:[{type:a,value:bp}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:z}]},{type:a,value:as},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:br},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:y}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,bs]},children:[{type:a,value:bt}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:y}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:"\n     "},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:A}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:as},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:K}]},{type:a,value:bu},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:y}]},{type:a,value:" surveyStore"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:"surveys"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,B]},children:[{type:a,value:bv}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:z}]},{type:a,value:"s "},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:_}]},{type:a,value:bw},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:"userId "},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:bx}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:ac}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:W},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:by},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:A}]},{type:a,value:as},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:ar}]},{type:a,value:" userSurvey\n    "},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:I},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:A}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:g,props:{},children:[{type:a,value:"If anything, I do like how Pinia is used to create a store. Also, "},{type:b,tag:h,props:{},children:[{type:a,value:am}]},{type:a,value:" uses "},{type:b,tag:h,props:{},children:[{type:a,value:bK}]},{type:a,value:bL},{type:b,tag:h,props:{},children:[{type:a,value:at}]},{type:a,value:" as part of its folder structure. You can see more about that here in their migration guide: "},{type:b,tag:l,props:{href:bM,rel:[D,E,F],target:G},children:[{type:a,value:bM}]}]},{type:a,value:f},{type:b,tag:g,props:{},children:[{type:a,value:"Now, this makes sense. If we are going to be naming our stores with the "},{type:b,tag:h,props:{},children:[{type:a,value:"use"}]},{type:a,value:" prefix, then it makes sense that the folder is named "},{type:b,tag:h,props:{},children:[{type:a,value:bK}]},{type:a,value:o}]},{type:a,value:f},{type:b,tag:g,props:{},children:[{type:a,value:"Using Pinia's store API in practice makes things a little more difficult (or perhaps just different) when you compare it to Vuex."}]},{type:a,value:f},{type:b,tag:M,props:{id:aX},children:[{type:b,tag:l,props:{href:"#how-we-utilize-vuex-in-code",ariaHidden:q,tabIndex:r},children:[{type:b,tag:c,props:{className:[s,t]},children:[]}]},{type:a,value:aY}]},{type:a,value:f},{type:b,tag:g,props:{},children:[{type:a,value:"If we want to use our profile store in a page, we do not have to import anything. This is because the state is accessed with the "},{type:b,tag:h,props:{},children:[{type:a,value:"$store"}]},{type:a,value:" property. This can be accessed anywhere in our site using "},{type:b,tag:h,props:{},children:[{type:a,value:bN}]},{type:a,value:o}]},{type:a,value:f},{type:b,tag:g,props:{},children:[{type:a,value:"The exception is when we want to use it in middleware, "},{type:b,tag:h,props:{},children:[{type:a,value:$}]},{type:a,value:", or other lifecycle hooks that do not have access to the store. In these cases, we normally pass the "},{type:b,tag:h,props:{},children:[{type:a,value:at}]},{type:a,value:" property. For example:"}]},{type:a,value:f},{type:b,tag:u,props:{className:[v]},children:[{type:b,tag:w,props:{className:[x,Z]},children:[{type:b,tag:h,props:{},children:[{type:b,tag:c,props:{className:[d,B]},children:[{type:a,value:$}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:z}]},{type:b,tag:c,props:{className:[d,S]},children:[{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:bO},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:" store "},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:A}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:I},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:K}]},{type:a,value:" currentProfile "},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:y}]},{type:a,value:" store"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,C]},children:[{type:a,value:"profile"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,C]},children:[{type:a,value:W}]},{type:a,value:I},{type:b,tag:c,props:{className:[d,au,k]},children:[{type:a,value:av}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:M,props:{id:aZ},children:[{type:b,tag:l,props:{href:"#how-does-this-change-in-pinia",ariaHidden:q,tabIndex:r},children:[{type:b,tag:c,props:{className:[s,t]},children:[]}]},{type:a,value:a_}]},{type:a,value:f},{type:b,tag:g,props:{},children:[{type:a,value:"Pinia makes things just a little more difficult and a little more verbose."}]},{type:a,value:f},{type:b,tag:g,props:{},children:[{type:a,value:"Let's take the most annoying part. If we want to access the store in "},{type:b,tag:h,props:{},children:[{type:a,value:$}]},{type:a,value:", we cannot just pass "},{type:b,tag:h,props:{},children:[{type:a,value:at}]},{type:a,value:" (in fact, it would no longer exist when using Pinia). Instead, we have to pass the "},{type:b,tag:h,props:{},children:[{type:a,value:aw}]},{type:a,value:" property."}]},{type:a,value:f},{type:b,tag:u,props:{className:[v]},children:[{type:b,tag:w,props:{className:[x,Z]},children:[{type:b,tag:h,props:{},children:[{type:b,tag:c,props:{className:[d,B]},children:[{type:a,value:$}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:z}]},{type:b,tag:c,props:{className:[d,S]},children:[{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:bO},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:" $pinia "},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:A}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:I},{type:b,tag:c,props:{className:[d,au,k]},children:[{type:a,value:av}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:g,props:{},children:[{type:a,value:"But that's not all. We "},{type:b,tag:U,props:{},children:[{type:a,value:"also"}]},{type:a,value:" have to import the store that we want to use, and then pass the "},{type:b,tag:h,props:{},children:[{type:a,value:aw}]},{type:a,value:" property to the store function to \"activate\" it."}]},{type:a,value:f},{type:b,tag:u,props:{className:[v]},children:[{type:b,tag:w,props:{className:[x,Z]},children:[{type:b,tag:h,props:{},children:[{type:b,tag:c,props:{className:[d,j,J]},children:[{type:a,value:V}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,ad]},children:[{type:a,value:ax}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,j,J]},children:[{type:a,value:Y}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,T]},children:[{type:a,value:"'~stores\u002Fprofile'"}]},{type:a,value:N},{type:b,tag:c,props:{className:[d,au,k]},children:[{type:a,value:av}]},{type:a,value:N},{type:b,tag:c,props:{className:[d,ai,B,C]},children:[{type:a,value:$}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:z}]},{type:b,tag:c,props:{className:[d,S]},children:[{type:a,value:"axios"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:" $pinia"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:A}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:I},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:K}]},{type:a,value:" profileStore "},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:y}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,B]},children:[{type:a,value:ax}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:z}]},{type:a,value:aw},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:A}]},{type:a,value:bB},{type:b,tag:c,props:{className:[d,P]},children:[{type:a,value:"\u002F\u002F now we can access our states"}]},{type:a,value:I},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:K}]},{type:a,value:" user "},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:y}]},{type:a,value:bP},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,C]},children:[{type:a,value:W}]},{type:a,value:I},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:K}]},{type:a,value:" options "},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:y}]},{type:a,value:bP},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,C]},children:[{type:a,value:ah}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:g,props:{},children:[{type:a,value:"Whether you think this is better or worse depends on your idea of ease of use and maintainability. Personally, I think it makes things a little harder to use since we now have to import all the stores that we need to access in a particular file. Basically, it takes longer to set up. However, this may mean that maintainability may be a little better (not necessarily easier), but that depends on you."}]},{type:a,value:f},{type:b,tag:R,props:{id:a$},children:[{type:b,tag:l,props:{href:"#my-solution",ariaHidden:q,tabIndex:r},children:[{type:b,tag:c,props:{className:[s,t]},children:[]}]},{type:a,value:ba}]},{type:a,value:f},{type:b,tag:g,props:{},children:[{type:a,value:"I wanted to replicate how we could use "},{type:b,tag:h,props:{},children:[{type:a,value:bN}]},{type:a,value:" anywhere in the code to access our state. I created a global mixin that would be initialized when the frontend is spun up."}]},{type:a,value:f},{type:b,tag:u,props:{className:[v]},children:[{type:b,tag:w,props:{className:[x,Z]},children:[{type:b,tag:h,props:{},children:[{type:b,tag:c,props:{className:[d,j,J]},children:[{type:a,value:V}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,ad]},children:[{type:b,tag:c,props:{className:[d,bQ]},children:[{type:a,value:bR}]}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,j,J]},children:[{type:a,value:Y}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,T]},children:[{type:a,value:"'vue'"}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,j,J]},children:[{type:a,value:V}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,ad]},children:[{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:" mapStores "},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,j,J]},children:[{type:a,value:Y}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,T]},children:[{type:a,value:bH}]},{type:a,value:N},{type:b,tag:c,props:{className:[d,P]},children:[{type:a,value:"\u002F\u002F As we create more stores, we need to import each one"}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,j,J]},children:[{type:a,value:V}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,ad]},children:[{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:bJ},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,j,J]},children:[{type:a,value:Y}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,T]},children:[{type:a,value:"'~\u002Fstores\u002Fprofile'"}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,j,J]},children:[{type:a,value:V}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,ad]},children:[{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:" useSurveyStore "},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,j,J]},children:[{type:a,value:Y}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,T]},children:[{type:a,value:"'~\u002Fstores\u002Fsurvey'"}]},{type:a,value:N},{type:b,tag:c,props:{className:[d,bQ]},children:[{type:a,value:bR}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,ai,B,C]},children:[{type:a,value:"mixin"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:z}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:"\n  computed"},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:O}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:X},{type:b,tag:c,props:{className:[d,B]},children:[{type:a,value:ak}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:z}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:A}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:aj},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:K}]},{type:a,value:" stores "},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:y}]},{type:a,value:i},{type:b,tag:c,props:{className:[d,B]},children:[{type:a,value:"mapStores"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:z}]},{type:a,value:ax},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:" useSurveyStore"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:A}]},{type:a,value:aj},{type:b,tag:c,props:{className:[d,j,bz]},children:[{type:a,value:ar}]},{type:a,value:" stores\n    "},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:I},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:A}]},{type:a,value:N}]}]}]},{type:a,value:f},{type:b,tag:g,props:{},children:[{type:a,value:"Now I can access "},{type:b,tag:h,props:{},children:[{type:a,value:ak}]},{type:a,value:" from anywhere in the app, except from certain lifecycle hooks, such as "},{type:b,tag:h,props:{},children:[{type:a,value:$}]},{type:a,value:", and "},{type:b,tag:h,props:{},children:[{type:a,value:"middleware"}]},{type:a,value:o}]},{type:a,value:f},{type:b,tag:g,props:{},children:[{type:a,value:"Granted, I can probably spend some time to change this so that it's a plugin or module that is available everywhere at any time."}]},{type:a,value:f},{type:b,tag:g,props:{},children:[{type:a,value:"However, because the Pinia stores are functions, how we call them will be confusing to developers."}]},{type:a,value:f},{type:b,tag:u,props:{className:[v]},children:[{type:b,tag:w,props:{className:[x,Z]},children:[{type:b,tag:h,props:{},children:[{type:b,tag:c,props:{className:[d,P]},children:[{type:a,value:"\u002F\u002F We have to write the code like this if we use a global mixin to access the stores."}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:ac}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,C]},children:[{type:a,value:ak}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,ai,B,C]},children:[{type:a,value:bS}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:z}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:A}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,C]},children:[{type:a,value:W}]},{type:a,value:N},{type:b,tag:c,props:{className:[d,bT,P]},children:[{type:a,value:"\u002F**\n * But in this case, the following will return an error.\n *\u002F"}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:ac}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,C]},children:[{type:a,value:ak}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,C]},children:[{type:a,value:bS}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,C]},children:[{type:a,value:W}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,bT,P]},children:[{type:a,value:"\u002F**\n * However, if we imported the `useProfileStore` function directly into the file where it is being accessed,\n * then the above code would not return an error.\n *\u002F"}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:M,props:{id:bb},children:[{type:b,tag:l,props:{href:"#should-you-use-pinia",ariaHidden:q,tabIndex:r},children:[{type:b,tag:c,props:{className:[s,t]},children:[]}]},{type:a,value:bc}]},{type:a,value:f},{type:b,tag:g,props:{},children:[{type:a,value:"Well, it depends. If your project is small and you want to use a state management system that will continue to have new features added, then sure, Pinia might be for you."}]},{type:a,value:f},{type:b,tag:g,props:{},children:[{type:a,value:"But, if you're like us and you're already using Vuex, I honestly cannot make the recommendation to switch over to the Pinia system. From what I can see, it simply does not improve anything."}]},{type:a,value:f},{type:b,tag:g,props:{},children:[{type:a,value:"The Pinia team made one thing less verbose: creating a state that does not require "},{type:b,tag:h,props:{},children:[{type:a,value:"mutations"}]},{type:a,value:ay},{type:b,tag:h,props:{},children:[{type:a,value:bG}]},{type:a,value:" blocks."}]},{type:a,value:f},{type:b,tag:g,props:{},children:[{type:a,value:"But, then they made another part of it "},{type:b,tag:U,props:{},children:[{type:a,value:"more"}]},{type:a,value:" verbose: Importing your states in each file that uses them, and requiring more code to initiate them."}]},{type:a,value:f},{type:b,tag:g,props:{},children:[{type:a,value:"Furthermore, I think Pinia makes it pretty clear that they assume you are using the Composition API, instead of the Options API."}]},{type:a,value:f},{type:b,tag:M,props:{id:bd},children:[{type:b,tag:l,props:{href:"#final-thoughts",ariaHidden:q,tabIndex:r},children:[{type:b,tag:c,props:{className:[s,t]},children:[]}]},{type:a,value:be}]},{type:a,value:f},{type:b,tag:g,props:{},children:[{type:a,value:"I understand why the Vuex team decided to make Pinia the new standard. They saw that Pinia incorporated different things that they already wanted to add in the new version of Vuex. So, instead of making a new version, they decided to make Pinia the defacto standard."}]},{type:a,value:f},{type:b,tag:g,props:{},children:[{type:a,value:"Because of that, if I was making a new project, I would use Pinia instead of Vuex."}]},{type:a,value:f},{type:b,tag:g,props:{},children:[{type:a,value:"That doesn't necessarily mean that Pinia is better than Vuex, though."}]},{type:a,value:f},{type:b,tag:g,props:{},children:[{type:a,value:"As it stands, Vuex is currently in maintenance mode, so bugs will continue to be fixed. However, I cannot fathom converting a project from Vuex to Pinia; the benefits, if any, are minimal at best."}]},{type:a,value:f},{type:b,tag:g,props:{},children:[{type:a,value:"If you are using "},{type:b,tag:h,props:{},children:[{type:a,value:"Nuxt"}]},{type:a,value:", especially Nuxt 3, then you should probably use Pinia instead of Vuex, since Nuxt 3 will support Pinia. However, Vuex still remains a viable option if you are in the process of updating your project from nuxtjs to Nuxt 3."}]},{type:a,value:f},{type:b,tag:g,props:{},children:[{type:a,value:"In conclusion, use Pinia if you are making a new project. Otherwise, stick with what you have. Epital will be sticking with what works for it, and in this case that is Vuex."}]},{type:a,value:f},{type:b,tag:bU,props:{},children:[{type:a,value:f},{type:b,tag:g,props:{},children:[{type:a,value:"If it's not broke, don't fix it.\n-- Me. And probably a million other people."}]},{type:a,value:f}]},{type:a,value:f},{type:b,tag:g,props:{},children:[{type:b,tag:l,props:{href:"https:\u002F\u002Fv3.nuxtjs.org\u002Fbridge\u002Foverview",rel:[D,E,F],target:G},children:[{type:a,value:"Nuxt Bridge"}]},{type:a,value:f},{type:b,tag:l,props:{href:"https:\u002F\u002Fvuejs.org\u002Fapi\u002Fcomposition-api-setup.html",rel:[D,E,F],target:G},children:[{type:a,value:"Composition API"}]},{type:a,value:f},{type:b,tag:l,props:{href:"https:\u002F\u002Fvuejs.org\u002Fapi\u002Foptions-state.html",rel:[D,E,F],target:G},children:[{type:a,value:"Options API"}]}]}]},dir:bV,path:"\u002Farticles\u002Fen\u002Fchallenges-with-switching-to-pinia",extension:az},{slug:"updating-to-nuxt-bridge",description:"AKA how to bang head on desk and how to debug weird errors",title:bW,img:"\u002Fimg\u002Fnuxt-gem.png",alt:bW,author:{name:aD,slug:aE,bio:aF,img:aG},createdAt:bX,updatedAt:bX,tags:[af,"bridge"],toc:[{id:bY,depth:L,text:bZ},{id:b_,depth:L,text:b$},{id:ca,depth:L,text:cb},{id:cc,depth:L,text:cd},{id:ce,depth:L,text:cf},{id:cg,depth:Q,text:ch},{id:ci,depth:Q,text:cj},{id:ck,depth:Q,text:cl},{id:cm,depth:Q,text:cn},{id:co,depth:L,text:cp}],body:{type:al,children:[{type:b,tag:g,props:{},children:[{type:a,value:"In my last article, I wrote about the challenges I encountered with switching state management systems, from Vuex to Pinia. You can read that here in case you're interested: "},{type:b,tag:l,props:{href:"https:\u002F\u002Fblog.epigno.jp\u002Fen\u002Fblog\u002Fchallenges-with-switching-to-pinia\u002F",rel:[D,E,F],target:G},children:[{type:a,value:"Challenges switching to Pinia"}]}]},{type:a,value:f},{type:b,tag:g,props:{},children:[{type:a,value:"The switch to Pinia (or, at the least the attempt to switch) is related because Nuxt does wish to support Pinia in Nuxt three, as well as Nuxt Bridge. My coworker Olivier and I thought that switching to Pinia may make the upgrade to Nuxt Bridge easier. In the end, we decided not to use Pinia, but I'm not sure it would have made much of a difference either way."}]},{type:a,value:f},{type:b,tag:g,props:{},children:[{type:a,value:"This article will serve as documentation for the upgrade path to Nuxt Bridge from a Nuxt JS project using Vue2 and the Options API. I hope it will also help others who may be struggling with upgrading to Nuxt Bridge and, eventually, Nuxt 3."}]},{type:a,value:f},{type:b,tag:g,props:{},children:[{type:a,value:"As Mario would say, "},{type:b,tag:U,props:{},children:[{type:a,value:"Here we go!"}]}]},{type:a,value:f},{type:b,tag:M,props:{id:bY},children:[{type:b,tag:l,props:{href:"#first-steps",ariaHidden:q,tabIndex:r},children:[{type:b,tag:c,props:{className:[s,t]},children:[]}]},{type:a,value:bZ}]},{type:a,value:f},{type:b,tag:g,props:{},children:[{type:a,value:"Going off of the "},{type:b,tag:l,props:{href:"https:\u002F\u002Fv3.nuxtjs.org\u002Fbridge\u002Foverview\u002F",rel:[D,E,F],target:G},children:[{type:a,value:"Nuxt Bridge migration guide"}]},{type:a,value:" we must first remove any "},{type:b,tag:h,props:{},children:[{type:a,value:"package-lock.json"}]},{type:a,value:ay},{type:b,tag:h,props:{},children:[{type:a,value:"yarn.lock"}]},{type:a,value:" files (why, I'm not sure, but that's what the docs state, so that's what we do). In our case, we use "},{type:b,tag:h,props:{},children:[{type:a,value:"package.json"}]},{type:a,value:" for adding new dependencies, so we need to remove "},{type:b,tag:h,props:{},children:[{type:a,value:ae}]},{type:a,value:" and add "},{type:b,tag:h,props:{},children:[{type:a,value:"nuxt-edge"}]},{type:a,value:o}]},{type:a,value:f},{type:b,tag:u,props:{className:[v]},children:[{type:b,tag:w,props:{className:[H,x]},children:[{type:b,tag:h,props:{},children:[{type:a,value:"- \"nuxt\": \"^2.15.0\"\n+ \"nuxt-edge\": \"latest\"\n"}]}]}]},{type:a,value:f},{type:b,tag:g,props:{},children:[{type:a,value:"Then run "},{type:b,tag:h,props:{},children:[{type:a,value:cq}]}]},{type:a,value:f},{type:b,tag:g,props:{},children:[{type:a,value:"After we test our "},{type:b,tag:h,props:{},children:[{type:a,value:"dev"}]},{type:a,value:" and "},{type:b,tag:h,props:{},children:[{type:a,value:"production"}]},{type:a,value:" builds, we need to then add the nuxt bridge dependency. We use "},{type:b,tag:h,props:{},children:[{type:a,value:aA}]},{type:a,value:", so we'll run the command:"}]},{type:a,value:f},{type:b,tag:g,props:{},children:[{type:b,tag:h,props:{},children:[{type:a,value:"yarn add --dev @nuxt\u002Fbridge@npm:@nuxt\u002Fbridge-edge"}]}]},{type:a,value:f},{type:b,tag:M,props:{id:b_},children:[{type:b,tag:l,props:{href:"#nuxi-cli-command-and-updating-scripts",ariaHidden:q,tabIndex:r},children:[{type:b,tag:c,props:{className:[s,t]},children:[]}]},{type:a,value:b$}]},{type:a,value:f},{type:b,tag:g,props:{},children:[{type:a,value:"At first, I had no idea why Nuxt decided to switch from the "},{type:b,tag:h,props:{},children:[{type:a,value:ae}]},{type:a,value:" CLI command to "},{type:b,tag:h,props:{},children:[{type:a,value:"nuxi"}]},{type:a,value:". Seemed a little strange."}]},{type:a,value:f},{type:b,tag:g,props:{},children:[{type:a,value:"It comes down to the fact that you can, in fact, still run the "},{type:b,tag:h,props:{},children:[{type:a,value:ae}]},{type:a,value:" command to run your local nuxt server. In order to utilize Nuxt Bridge, we have to update our scripts to use "},{type:b,tag:h,props:{},children:[{type:a,value:ae}]},{type:a,value:bL},{type:b,tag:h,props:{},children:[{type:a,value:ae}]},{type:a,value:o}]},{type:a,value:f},{type:b,tag:g,props:{},children:[{type:a,value:"In our case, we have scripts such as this:"}]},{type:a,value:f},{type:b,tag:u,props:{className:[v]},children:[{type:b,tag:w,props:{className:[H,x]},children:[{type:b,tag:h,props:{},children:[{type:a,value:"\"dev\": \"cross-env NODE_ENV=development nuxt\",\n"}]}]}]},{type:a,value:f},{type:b,tag:g,props:{},children:[{type:a,value:"Which needs to be changed to something like this:"}]},{type:a,value:f},{type:b,tag:u,props:{className:[v]},children:[{type:b,tag:w,props:{className:[H,x]},children:[{type:b,tag:h,props:{},children:[{type:a,value:"\"dev\": \"cross-env NODE_ENV=development nuxi dev\",\n"}]}]}]},{type:a,value:f},{type:b,tag:g,props:{},children:[{type:a,value:"Here is the "},{type:b,tag:l,props:{href:"https:\u002F\u002Fv3.nuxtjs.org\u002Fbridge\u002Foverview\u002F#nuxi",rel:[D,E,F],target:G},children:[{type:a,value:"official documentation"}]}]},{type:a,value:f},{type:b,tag:cr,props:{id:"and-now-the-problems"},children:[{type:b,tag:l,props:{href:"#and-now-the-problems",ariaHidden:q,tabIndex:r},children:[{type:b,tag:c,props:{className:[s,t]},children:[]}]},{type:a,value:"And now the problems"}]},{type:a,value:f},{type:b,tag:g,props:{},children:[{type:a,value:"Normally, this is where I would test things; run "},{type:b,tag:h,props:{},children:[{type:a,value:cq}]},{type:a,value:ay},{type:b,tag:h,props:{},children:[{type:a,value:aA}]},{type:a,value:", then run "},{type:b,tag:h,props:{},children:[{type:a,value:aB}]},{type:a,value:" and see if it works. But it won't, because we haven't updated our "},{type:b,tag:h,props:{},children:[{type:a,value:"nuxt.config.js"}]},{type:a,value:" file yet."}]},{type:a,value:f},{type:b,tag:g,props:{},children:[{type:a,value:"To give you an example, if you run "},{type:b,tag:h,props:{},children:[{type:a,value:aC}]},{type:a,value:" right now before updating the config file, you'll have error like this:"}]},{type:a,value:f},{type:b,tag:u,props:{className:[v]},children:[{type:b,tag:w,props:{className:[H,x]},children:[{type:b,tag:h,props:{},children:[{type:a,value:"Nuxt CLI v3.0.0-rc.2-27530889.9e5a3cd                                                          09:39:39\n                                                                                               09:39:39\n  \u003E Local:    http:\u002F\u002Flocalhost:3000\u002F\n  \u003E Network:  http:\u002F\u002F##.##.###.###:3000\u002F\n\n\n ERROR  Cannot start nuxt:  Cannot read properties of undefined (reading 'callHook')           09:39:41\n\n  at load (node_modules\u002Fnuxi-edge\u002Fdist\u002Fchunks\u002Fdev.mjs:6735:33)\n  ...\n\n"}]}]}]},{type:a,value:f},{type:b,tag:g,props:{},children:[{type:a,value:"This was actually an error very similar to the one i received when I first attempted to upgrade directly from Nuxt.js to Nuxt 3. The reason is the config file."}]},{type:a,value:f},{type:b,tag:g,props:{},children:[{type:a,value:"Going back to the "},{type:b,tag:l,props:{href:"https:\u002F\u002Fv3.nuxtjs.org\u002Fbridge\u002Foverview\u002F#update-nuxtconfig",rel:[D,E,F],target:G},children:[{type:a,value:"documentation"}]},{type:a,value:", we see that we need to import and use "},{type:b,tag:h,props:{},children:[{type:a,value:"defineNuxtConfig"}]},{type:a,value:O}]},{type:a,value:f},{type:b,tag:u,props:{className:[v]},children:[{type:b,tag:w,props:{className:[H,x]},children:[{type:b,tag:h,props:{},children:[{type:a,value:"import { defineNuxtConfig } from '@nuxt\u002Fbridge'\n\nexport default defineNuxtConfig({\n  \u002F\u002F Your existing configuration\n})\n"}]}]}]},{type:a,value:f},{type:b,tag:g,props:{},children:[{type:a,value:"However, in our case we still receive an error:"}]},{type:a,value:f},{type:b,tag:u,props:{className:[v]},children:[{type:b,tag:w,props:{className:[H,x]},children:[{type:b,tag:h,props:{},children:[{type:a,value:"FATAL  Please remove @nuxt\u002Ftypescript-build from buildModules or set bridge.typescript: false to avoid conflict with bridge.\n\n  at setupTypescript (node_modules\u002F@nuxt\u002Fbridge\u002Fdist\u002Fchunks\u002Fmodule.mjs:1173:11)\n  ...\n"}]}]}]},{type:a,value:f},{type:b,tag:g,props:{},children:[{type:a,value:"So, what's interesting is that the documentation does not explicityly state that this is an optional parameter that you can pass. It does tell you to remove typescript modules though."}]},{type:a,value:f},{type:b,tag:g,props:{},children:[{type:a,value:"So, if you are attempting to upgrade, make sure you go through each step of the upgrade process. Step by step. Don't try to test each individual step like I did, or you'll give yourself a headache."}]},{type:a,value:f},{type:b,tag:M,props:{id:ca},children:[{type:b,tag:l,props:{href:"#remove-incompatible-and-obsolete-modules",ariaHidden:q,tabIndex:r},children:[{type:b,tag:c,props:{className:[s,t]},children:[]}]},{type:a,value:cb}]},{type:a,value:f},{type:b,tag:g,props:{},children:[{type:a,value:"We only had the "},{type:b,tag:h,props:{},children:[{type:a,value:cs}]},{type:a,value:" module, so we remove this from our dependencies."}]},{type:a,value:f},{type:b,tag:bU,props:{},children:[{type:a,value:f},{type:b,tag:g,props:{},children:[{type:a,value:"Remove @nuxt\u002Ftypescript-build: Bridge enables same functionality"}]},{type:a,value:f}]},{type:a,value:f},{type:b,tag:u,props:{className:[v]},children:[{type:b,tag:w,props:{className:[H,x]},children:[{type:b,tag:h,props:{},children:[{type:a,value:"- \"@nuxt\u002Ftypescript-build\": \"^2.0.3\",\n"}]}]}]},{type:a,value:f},{type:b,tag:g,props:{},children:[{type:a,value:"We at Epigno do not use the "},{type:b,tag:h,props:{},children:[{type:a,value:"composition-api"}]},{type:a,value:", but you will have to remove it if you use it in your project. Note, that you may have an issue here if you are using "},{type:b,tag:h,props:{},children:[{type:a,value:aI}]},{type:a,value:", since I'm petty sure that pinia actually requires the composition-api as a dependency."}]},{type:a,value:f},{type:b,tag:g,props:{},children:[{type:a,value:"Also, make sure you update your "},{type:b,tag:h,props:{},children:[{type:a,value:".gitignore"}]},{type:a,value:" file."}]},{type:a,value:f},{type:b,tag:u,props:{className:[v]},children:[{type:b,tag:w,props:{className:[H,x]},children:[{type:b,tag:h,props:{},children:[{type:a,value:"# Nitro folder\n.output\n"}]}]}]},{type:a,value:f},{type:b,tag:M,props:{id:cc},children:[{type:b,tag:l,props:{href:"#update-your-nuxtconfig-file",ariaHidden:q,tabIndex:r},children:[{type:b,tag:c,props:{className:[s,t]},children:[]}]},{type:a,value:cd}]},{type:a,value:f},{type:b,tag:g,props:{},children:[{type:a,value:"Remember that you might have something in your config file that is looking for the old modules that you removed! So you need to remove these from your config. In our case, it was "},{type:b,tag:h,props:{},children:[{type:a,value:cs}]},{type:a,value:" in our build-modules configuration."}]},{type:a,value:f},{type:b,tag:u,props:{className:[v]},children:[{type:b,tag:w,props:{className:[H,x]},children:[{type:b,tag:h,props:{},children:[{type:a,value:"- buildModules: ['@nuxt\u002Ftypescript-build', '@aceforth\u002Fnuxt-optimized-images'],\n\n+ buildModules: ['@aceforth\u002Fnuxt-optimized-images'],\n"}]}]}]},{type:a,value:f},{type:b,tag:g,props:{},children:[{type:a,value:"After running "},{type:b,tag:h,props:{},children:[{type:a,value:aA}]},{type:a,value:", we can run "},{type:b,tag:h,props:{},children:[{type:a,value:aB}]},{type:a,value:" (or "},{type:b,tag:h,props:{},children:[{type:a,value:aC}]},{type:a,value:") and our project is up and running!"}]},{type:a,value:f},{type:b,tag:M,props:{id:ce},children:[{type:b,tag:l,props:{href:"#but-now-we-have-other-issues",ariaHidden:q,tabIndex:r},children:[{type:b,tag:c,props:{className:[s,t]},children:[]}]},{type:a,value:cf}]},{type:a,value:f},{type:b,tag:g,props:{},children:[{type:a,value:"First, it's important to note that I have been building and testing this repository on both Linux and MacOS. The results are "},{type:b,tag:U,props:{},children:[{type:a,value:"mostly"}]},{type:a,value:" the same. I will note what differences there are, if any."}]},{type:a,value:f},{type:b,tag:R,props:{id:cg},children:[{type:b,tag:l,props:{href:"#an-almost-infinite-loop",ariaHidden:q,tabIndex:r},children:[{type:b,tag:c,props:{className:[s,t]},children:[]}]},{type:a,value:ch}]},{type:a,value:f},{type:b,tag:g,props:{},children:[{type:a,value:"When I run "},{type:b,tag:h,props:{},children:[{type:a,value:aB}]},{type:a,value:", the config file will run "},{type:b,tag:h,props:{},children:[{type:a,value:aC}]},{type:a,value:". Everything seems to be running OK!"}]},{type:a,value:f},{type:b,tag:g,props:{},children:[{type:a,value:"However, when I open the browser (Google Chrome as usual) and enter the localhost address (127.0.0.1:3000), the terminal will show that there is an infinite loop as it looks for a variable."}]},{type:a,value:f},{type:b,tag:u,props:{className:[v]},children:[{type:b,tag:w,props:{className:[H,x]},children:[{type:b,tag:h,props:{},children:[{type:a,value:" $axios.onError\n [Vue warn] Error in render: \"TypeError: Cannot read properties of null (reading 'name')\"\n Error: Request failed with status code 401\n     at createError (\u002Ffrontend\u002Fnode_modules\u002Faxios\u002Flib\u002Fcore\u002FcreateError.js:16:15)\n     at settle (\u002Ffrontend\u002Fnode_modules\u002Faxios\u002Flib\u002Fcore\u002Fsettle.js:17:12)\n     at IncomingMessage.handleStreamEnd (\u002Ffrontend\u002Fnode_modules\u002Faxios\u002Flib\u002Fadapters\u002Fhttp.js:269:11)\n     at IncomingMessage.emit (node:events:402:35)\n     at endReadableNT (node:internal\u002Fstreams\u002Freadable:1343:12)\n     at processTicksAndRejections (node:internal\u002Fprocess\u002Ftask_queues:83:21) {\n   config: {\n     url: '\u002Fauth',\n\n...\n\n"}]}]}]},{type:a,value:f},{type:b,tag:g,props:{},children:[{type:a,value:"There is a whole stack trace and it just continues to loop over and over again. This "},{type:b,tag:U,props:{},children:[{type:a,value:"only"}]},{type:a,value:" appears to happen when you go directly to "},{type:b,tag:h,props:{},children:[{type:a,value:"127.0.0.1:3000"}]},{type:a,value:o}]},{type:a,value:f},{type:b,tag:g,props:{},children:[{type:a,value:"When this first happened, I decided to just let it run in the background. Eventually it did stop, and returned a 404 error."}]},{type:a,value:f},{type:b,tag:g,props:{},children:[{type:b,tag:ct,props:{alt:cu,src:"\u002Fimg\u002FnuxtBridge\u002Finitial404Error.png",title:cu},children:[]}]},{type:a,value:f},{type:b,tag:g,props:{},children:[{type:a,value:"If I tried typing in the address again, I would get a page that displayed a 503 error:"}]},{type:a,value:f},{type:b,tag:g,props:{},children:[{type:b,tag:ct,props:{alt:cv,src:"\u002Fimg\u002FnuxtBridge\u002F503ServerError.png",title:cv},children:[]}]},{type:a,value:f},{type:b,tag:g,props:{},children:[{type:a,value:"Looking at the terminal window, the stack trace eventually reveals that the user is \"Unauthenticated\""}]},{type:a,value:f},{type:b,tag:u,props:{className:[v]},children:[{type:b,tag:w,props:{className:[H,x]},children:[{type:b,tag:h,props:{},children:[{type:a,value:"...\n\ndata: { message: 'Unauthenticated.' }\n  },\n  isAxiosError: true,\n  toJSON: [Function: toJSON]\n}\n$axios.onError\n\n"}]}]}]},{type:a,value:f},{type:b,tag:g,props:{},children:[{type:a,value:"So I suspect that there must be something wrong with "},{type:b,tag:h,props:{},children:[{type:a,value:"auth"}]},{type:a,value:" or redirection, which wasn't a problem in NuxtJS."}]},{type:a,value:f},{type:b,tag:R,props:{id:ci},children:[{type:b,tag:l,props:{href:"#difference-between-linux-and-macos",ariaHidden:q,tabIndex:r},children:[{type:b,tag:c,props:{className:[s,t]},children:[]}]},{type:a,value:cj}]},{type:a,value:f},{type:b,tag:g,props:{},children:[{type:a,value:"In MacOS, the infinite loop seems to be a true infinite loop; it never crashes, the server never stops, and I never receive any server error. However, the loop continues even if I manually navigate successfully to "},{type:b,tag:h,props:{},children:[{type:a,value:"127.0.0.1:3000\u002Flogin"}]},{type:a,value:o}]},{type:a,value:f},{type:b,tag:R,props:{id:ck},children:[{type:b,tag:l,props:{href:"#related-issues",ariaHidden:q,tabIndex:r},children:[{type:b,tag:c,props:{className:[s,t]},children:[]}]},{type:a,value:cl}]},{type:a,value:f},{type:b,tag:g,props:{},children:[{type:a,value:"Some research reveals that there may actually be a problem with Nuxt Bridge and compatibility with NuxtJS\u002FAuth package, though the users have different problems."}]},{type:a,value:f},{type:b,tag:g,props:{},children:[{type:a,value:"Links: "},{type:b,tag:l,props:{href:cw,rel:[D,E,F],target:G},children:[{type:a,value:cw}]}]},{type:a,value:f},{type:b,tag:R,props:{id:cm},children:[{type:b,tag:l,props:{href:"#other-errors",ariaHidden:q,tabIndex:r},children:[{type:b,tag:c,props:{className:[s,t]},children:[]}]},{type:a,value:cn}]},{type:a,value:f},{type:b,tag:g,props:{},children:[{type:a,value:"There are occasions where the authentication error just happens at random, causing the infinite loop problem."}]},{type:a,value:f},{type:b,tag:g,props:{},children:[{type:a,value:"Also, occasionally I would get a write error:"}]},{type:a,value:f},{type:b,tag:g,props:{},children:[{type:a,value:"In the browser:"}]},{type:a,value:f},{type:b,tag:u,props:{className:[v]},children:[{type:b,tag:w,props:{className:[H,x]},children:[{type:b,tag:h,props:{},children:[{type:a,value:"{\n  \"statusCode\": 500,\n  \"statusMessage\": \"H3Error\",\n  \"stack\": []\n}\n"}]}]}]},{type:a,value:f},{type:b,tag:g,props:{},children:[{type:a,value:"In the terminal we see the following:"}]},{type:a,value:f},{type:b,tag:u,props:{className:[v]},children:[{type:b,tag:w,props:{className:[H,x]},children:[{type:b,tag:h,props:{},children:[{type:a,value:"ERROR  [h3] write EPIPE\n\nat afterWriteDispatched (node:internal\u002Fstream_base_commons:164:15)\nat writeGeneric (node:internal\u002Fstream_base_commons:155:3)\nat Socket._writeGeneric (node:net:795:11)\nat Socket.connect (node:net:777:12)\nat Object.onceWrapper (node:events:509:28)\nat Socket.emit (node:events:402:35)\nat Socket.emit (node:domain:475:12)\nat PipeConnectWrap.afterConnect [as oncomplete] (node:net:1147:10)\n\n"}]}]}]},{type:a,value:f},{type:b,tag:g,props:{},children:[{type:a,value:"I had no idea what this was! However, I did find two github issues, one closed and one that was opened a couple weeks ago."}]},{type:a,value:f},{type:b,tag:g,props:{},children:[{type:a,value:"First issue (Closed): "},{type:b,tag:l,props:{href:cx,rel:[D,E,F],target:G},children:[{type:a,value:cx}]}]},{type:a,value:f},{type:b,tag:g,props:{},children:[{type:a,value:"Second issue (Open): "},{type:b,tag:l,props:{href:cy,rel:[D,E,F],target:G},children:[{type:a,value:cy}]}]},{type:a,value:f},{type:b,tag:M,props:{id:co},children:[{type:b,tag:l,props:{href:"#css-loading-problem",ariaHidden:q,tabIndex:r},children:[{type:b,tag:c,props:{className:[s,t]},children:[]}]},{type:a,value:cp}]},{type:a,value:f},{type:b,tag:g,props:{},children:[{type:a,value:"A separate issue is a problem loading the CSS correctly."}]},{type:a,value:f},{type:b,tag:g,props:{},children:[{type:a,value:"Upon any initial page load, the CSS styling does not get preloaded. So, the user will see a flash of unstyled HTML elements, images, etc, for just a moment before the styles are loaded and set."}]},{type:a,value:f},{type:b,tag:g,props:{},children:[{type:a,value:"I have tried importing the style sheet directly, but this did absolutely nothing."}]},{type:a,value:f},{type:b,tag:g,props:{},children:[{type:a,value:"This appears to be an ongoing issue. You can read more about it here: "},{type:b,tag:l,props:{href:cz,rel:[D,E,F],target:G},children:[{type:a,value:cz}]}]},{type:a,value:f},{type:b,tag:cr,props:{id:"conclusion"},children:[{type:b,tag:l,props:{href:"#conclusion",ariaHidden:q,tabIndex:r},children:[{type:b,tag:c,props:{className:[s,t]},children:[]}]},{type:a,value:"Conclusion"}]},{type:a,value:f},{type:b,tag:g,props:{},children:[{type:a,value:"Unfortunately, as it stands, upgrading to Nuxt Bridge is a total non-starter for the Epital project. Two things need to be fixed before we could consider releasing this into production:"}]},{type:a,value:f},{type:b,tag:"ol",props:{},children:[{type:a,value:f},{type:b,tag:cA,props:{},children:[{type:a,value:"Nuxt Auth needs to work out of the box, or a replacement needs to be recommended"}]},{type:a,value:f},{type:b,tag:cA,props:{},children:[{type:a,value:"CSS processing needs to be updated and fixed"}]},{type:a,value:f}]},{type:a,value:f},{type:b,tag:g,props:{},children:[{type:a,value:"For now, it seems like we are stuck using the current version of NuxtJS and Vue2. Although the Nuxt team seems to beleive that Nuxt Bridge is stable and should allow current users of NuxtJS \u002F Vue2 to be able to upgrade, it obviously still has some issues. Hopefully they can be addressed soon."}]},{type:a,value:f},{type:b,tag:g,props:{},children:[{type:a,value:"Due to these issues, Epigno will continue to use NuxtJS, Vuex, and Vue2 for the foreseeable future."}]}]},dir:bV,path:"\u002Farticles\u002Fen\u002Fupdating-to-nuxt-bridge",extension:az}],tag:{slug:af,description:"NuxtJS is an open source framework making web development simple and powerful.",name:af,img:"https:\u002F\u002Fimages.unsplash.com\u002Fphoto-1598313183973-4effcded8d5e?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=675&q=80",toc:[],body:{type:al,children:[]},dir:"\u002Ftags",path:"\u002Ftags\u002Fnuxtjs",extension:az,createdAt:cB,updatedAt:cB}}],fetch:{},mutations:void 0}}("text","element","span","token","punctuation","\n","p","code"," ","keyword","operator","a","{","}",".",",","true",-1,"icon","icon-link","div","nuxt-content-highlight","pre","line-numbers","=","(",")","function","property-access","nofollow","noopener","noreferrer","_blank","language-text","\n  ","module","const",2,"h2","\n\n",":","comment",3,"h3","parameter","string","em","import","user","\n    ","from","language-js","=\u003E","asyncData","export","state","this","imports","nuxt","nuxtjs","arrow","options","method","\n      ","$stores","root","Pinia","function-variable","\n\n    ","[","]","return","\n       ","store","spread","...","$pinia","useProfileStore"," or ",".md","yarn","yarn dev","nuxi dev","Nathaniel Nasarow","nasarow","Engineer at Epigno","\u002Fimg\u002Fauthors\u002Fpic-nasarow.jpg","2022-04-21T00:00:00.000Z","pinia","what-is-pinia","What is Pinia?","why-pinia","Why Pinia?","migration-guide","Migration Guide:","post-installation-bug","Post-installation bug","composition-api-and-why-its-required","Composition API and why it's required","pinia-is-not-necessarily-better-than-vuex","Pinia is not necessarily better than Vuex","creating-a-store-uses-less-code","Creating a store uses less code.","how-we-utilize-vuex-in-code","How we utilize Vuex in code","how-does-this-change-in-pinia","How does this change in Pinia?","my-solution","My solution","should-you-use-pinia","Should you use Pinia?","final-thoughts","Final Thoughts","https:\u002F\u002Fvuex.vuejs.org\u002F#what-is-vuex","https:\u002F\u002Fpinia.vuejs.org\u002Fcookbook\u002Fmigration-vuex.html#preparation","https:\u002F\u002Fgithub.com\u002Fvuejs\u002Fpinia\u002Fissues\u002F675","https:\u002F\u002Fgithub.com\u002Fvuejs\u002Fpinia\u002Fblob\u002Fv2\u002Fpackages\u002Fdocs\u002Fcookbook\u002Fmigration-v1-v2.md#webpack-4-support","\n  user","\n  options"," getters ","getUser"," state","async","retrievePendingUserSurveys"," getters"," force ","boolean","false"," userSurvey ","filter"," s","===","id","control-flow","setUser","\n\n  ","setOptions"," key"," value ","key","getters","'pinia'"," Object"," useProfileStore ","stores"," instead of ","https:\u002F\u002Fpinia.vuejs.org\u002Fcookbook\u002Fmigration-vuex.html#restructuring-modules-to-stores","this.$store"," axios"," profileStore","maybe-class-name","Vue","profileStore","doc-comment","blockquote","\u002Farticles\u002Fen","Updating to Nuxt Bridge","2022-05-15T00:00:00.000Z","first-steps","First steps","nuxi-cli-command-and-updating-scripts","Nuxi CLI command and updating scripts","remove-incompatible-and-obsolete-modules","Remove incompatible and obsolete modules","update-your-nuxtconfig-file","Update your nuxt.config file!","but-now-we-have-other-issues","But now we have other issues","an-almost-infinite-loop","An (almost) Infinite Loop","difference-between-linux-and-macos","Difference between Linux and MacOS","related-issues","Related issues?","other-errors","Other errors","css-loading-problem","CSS loading problem","yarn install","h1","typescript-build","img","Initial 404 Error","503 Server Error","https:\u002F\u002Fgithub.com\u002Fnuxt-community\u002Fauth-module\u002Fissues\u002F1519#issuecomment-1112153311","https:\u002F\u002Fgithub.com\u002Fnuxt\u002Fframework\u002Fissues\u002F4085","https:\u002F\u002Fgithub.com\u002Fnuxt-community\u002Ftailwindcss-module\u002Fissues\u002F471","https:\u002F\u002Fgithub.com\u002Fnuxt\u002Fbridge\u002Fissues\u002F26","li","2022-01-27T04:59:36.972Z")));