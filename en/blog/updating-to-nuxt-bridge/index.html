<!doctype html>
<html data-n-head-ssr dir="ltr" lang="en" data-n-head="%7B%22dir%22:%7B%22ssr%22:%22ltr%22%7D,%22lang%22:%7B%22ssr%22:%22en%22%7D%7D">
  <head>
    <title>Epigno Tech Blog</title><meta data-n-head="ssr" charset="utf-8"><meta data-n-head="ssr" name="viewport" content="width=device-width,initial-scale=1"><meta data-n-head="ssr" data-hid="description" name="description" content="Epigno社内で出会う技術問題の特集"><meta data-n-head="ssr" data-hid="og:title" name="og:title" content="Epigno Tech Blog"><meta data-n-head="ssr" data-hid="og:type" name="og:type" content="website"><meta data-n-head="ssr" data-hid="og:image" name="og:image" content="https://u.jimcdn.com/cms/o/seec97e996b647a8d/userlayout/img/logo-small.png?t=1583479236"><meta data-n-head="ssr" data-hid="og:url" name="og:url" content="https://blog.epigno.jp"><meta data-n-head="ssr" data-hid="i18n-og" property="og:locale" content="en"><meta data-n-head="ssr" data-hid="i18n-og-alt-ja" property="og:locale:alternate" content="ja"><link data-n-head="ssr" rel="icon" type="image/x-icon" href="/favicon.ico"><link data-n-head="ssr" data-hid="i18n-alt-ja" rel="alternate" href="/blog/updating-to-nuxt-bridge" hreflang="ja"><link data-n-head="ssr" data-hid="i18n-alt-en" rel="alternate" href="/en/blog/updating-to-nuxt-bridge" hreflang="en"><link data-n-head="ssr" data-hid="i18n-xd" rel="alternate" href="/blog/updating-to-nuxt-bridge" hreflang="x-default"><link data-n-head="ssr" data-hid="i18n-can" rel="canonical" href="/en/blog/updating-to-nuxt-bridge"><link rel="preload" href="/_nuxt/039edcf.js" as="script"><link rel="preload" href="/_nuxt/8727830.js" as="script"><link rel="preload" href="/_nuxt/f8df8b6.js" as="script"><link rel="preload" href="/_nuxt/e65a8ff.js" as="script"><link rel="preload" href="/_nuxt/9c14ffb.js" as="script"><style data-vue-ssr-id="38dfa7e4:0 0623093e:0 fa7ff0ca:0 56b15182:0 083745fe:0 54d81fc0:0">/*! normalize.css v8.0.1 | MIT License | github.com/necolas/normalize.css */html{line-height:1.15;-webkit-text-size-adjust:100%}body{margin:0}main{display:block}h1{font-size:2em;margin:.67em 0}hr{box-sizing:content-box;height:0;overflow:visible}pre{font-family:monospace,monospace;font-size:1em}a{background-color:transparent}abbr[title]{border-bottom:none;text-decoration:underline;-webkit-text-decoration:underline dotted;text-decoration:underline dotted}b,strong{font-weight:bolder}code,kbd,samp{font-family:monospace,monospace;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}button,input,optgroup,select,textarea{font-family:inherit;font-size:100%;line-height:1.15;margin:0}button,input{overflow:visible}button,select{text-transform:none}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{padding:.35em .75em .625em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}progress{vertical-align:baseline}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}details{display:block}summary{display:list-item}[hidden],template{display:none}blockquote,dd,dl,figure,h1,h2,h3,h4,h5,h6,hr,p,pre{margin:0}button{background-color:transparent;background-image:none}button:focus{outline:1px dotted;outline:5px auto -webkit-focus-ring-color}fieldset,ol,ul{margin:0;padding:0}ol,ul{list-style:none}html{font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,sans-serif,BlinkMacSystemFont,"Segoe UI","Helvetica Neue",Arial,"Noto Sans","Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";line-height:1.5}*,:after,:before{box-sizing:border-box;border:0 solid #e2e8f0}hr{border-top-width:1px}img{border-style:solid}textarea{resize:vertical}input::-moz-placeholder,textarea::-moz-placeholder{color:#a0aec0}input:-ms-input-placeholder,textarea:-ms-input-placeholder{color:#a0aec0}input::placeholder,textarea::placeholder{color:#a0aec0}[role=button],button{cursor:pointer}table{border-collapse:collapse}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;text-decoration:inherit}button,input,optgroup,select,textarea{padding:0;line-height:inherit;color:inherit}code,kbd,pre,samp{font-family:SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace}audio,canvas,embed,iframe,img,object,svg,video{display:block;vertical-align:middle}img,video{max-width:100%;height:auto}.container{width:100%}@media (min-width:320px){.container{max-width:320px}}@media (min-width:640px){.container{max-width:640px}}@media (min-width:768px){.container{max-width:768px}}@media (min-width:1024px){.container{max-width:1024px}}@media (min-width:1280px){.container{max-width:1280px}}@media (min-width:1351px){.container{max-width:1351px}}.bg-black{--bg-opacity:1;background-color:#000;background-color:rgba(0,0,0,var(--bg-opacity))}.bg-blue-500{--bg-opacity:1;background-color:#4299e1;background-color:rgba(66,153,225,var(--bg-opacity))}.border-gray-500{--border-opacity:1;border-color:#a0aec0;border-color:rgba(160,174,192,var(--border-opacity))}.rounded-full{border-radius:9999px}.border{border-width:1px}.border-t-2{border-top-width:2px}.flex{display:flex}.table{display:table}.flex-col{flex-direction:column}.flex-wrap{flex-wrap:wrap}.self-center{align-self:center}.justify-center{justify-content:center}.justify-between{justify-content:space-between}.font-medium{font-weight:500}.font-semibold{font-weight:600}.font-bold{font-weight:700}.h-48{height:12rem}.h-full{height:100%}.text-sm{font-size:.875rem}.text-xl{font-size:1.25rem}.text-2xl{font-size:1.5rem}.text-4xl{font-size:2.25rem}.m-4{margin:1rem}.m-8{margin:2rem}.mt-2{margin-top:.5rem}.mr-2{margin-right:.5rem}.mb-2{margin-bottom:.5rem}.mr-3{margin-right:.75rem}.mt-4{margin-top:1rem}.mb-4{margin-bottom:1rem}.mt-8{margin-top:2rem}.mr-8{margin-right:2rem}.mt-16{margin-top:4rem}.-mb-3{margin-bottom:-.75rem}.object-cover{-o-object-fit:cover;object-fit:cover}.overflow-y-scroll{overflow-y:scroll}.p-4{padding:1rem}.p-6{padding:1.5rem}.py-1{padding-top:.25rem;padding-bottom:.25rem}.py-2{padding-top:.5rem;padding-bottom:.5rem}.px-2{padding-left:.5rem;padding-right:.5rem}.px-3{padding-left:.75rem;padding-right:.75rem}.px-4{padding-left:1rem;padding-right:1rem}.static{position:static}.absolute{position:absolute}.relative{position:relative}.top-32{top:32px}.right-32{right:32px}.left-32{left:32px}.top-3rem{top:3rem}.right-3rem{right:3rem}.shadow-sm{box-shadow:0 1px 2px 0 rgba(0,0,0,.05)}.hover\:shadow-md:hover{box-shadow:0 4px 6px -1px rgba(0,0,0,.1),0 2px 4px -1px rgba(0,0,0,.06)}.text-center{text-align:center}.text-black{--text-opacity:1;color:#000;color:rgba(0,0,0,var(--text-opacity))}.text-white{--text-opacity:1;color:#fff;color:rgba(255,255,255,var(--text-opacity))}.text-gray-500{--text-opacity:1;color:#a0aec0;color:rgba(160,174,192,var(--text-opacity))}.text-gray-600{--text-opacity:1;color:#718096;color:rgba(113,128,150,var(--text-opacity))}.uppercase{text-transform:uppercase}.hover\:underline:hover{text-decoration:underline}.tracking-wider{letter-spacing:.05em}.truncate{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.w-full{width:100%}.w-screen{width:100vw}.transition-colors{transition-property:background-color,border-color,color,fill,stroke}.transition-shadow{transition-property:box-shadow}.ease-linear{transition-timing-function:linear}.ease-in-out{transition-timing-function:cubic-bezier(.4,0,.2,1)}.duration-150{transition-duration:.15s}.duration-300{transition-duration:.3s}@-webkit-keyframes spin{to{transform:rotate(1turn)}}@keyframes spin{to{transform:rotate(1turn)}}@-webkit-keyframes ping{75%,to{transform:scale(2);opacity:0}}@keyframes ping{75%,to{transform:scale(2);opacity:0}}@-webkit-keyframes pulse{50%{opacity:.5}}@keyframes pulse{50%{opacity:.5}}@-webkit-keyframes bounce{0%,to{transform:translateY(-25%);-webkit-animation-timing-function:cubic-bezier(.8,0,1,1);animation-timing-function:cubic-bezier(.8,0,1,1)}50%{transform:none;-webkit-animation-timing-function:cubic-bezier(0,0,.2,1);animation-timing-function:cubic-bezier(0,0,.2,1)}}@keyframes bounce{0%,to{transform:translateY(-25%);-webkit-animation-timing-function:cubic-bezier(.8,0,1,1);animation-timing-function:cubic-bezier(.8,0,1,1)}50%{transform:none;-webkit-animation-timing-function:cubic-bezier(0,0,.2,1);animation-timing-function:cubic-bezier(0,0,.2,1)}}.nuxt-content-highlight{position:relative}.nuxt-content-highlight .filename{position:absolute;right:0;--text-opacity:1;color:#718096;color:rgba(113,128,150,var(--text-opacity));font-weight:300;z-index:10;margin-right:.5rem;margin-top:.25rem;font-size:.875rem}blockquote{background:#f9f9f9;border-left:10px solid #ccc;margin:1.5em 10px;padding:.5em 10px;quotes:"\201C""\201D""\2018""\2019"}blockquote:before{color:#ccc;content:open-quote;font-size:4em;line-height:.1em;margin-right:.25em;vertical-align:-.4em}blockquote p{display:inline}@media (min-width:320px){.xs\:container{width:100%}}@media (min-width:320px) and (min-width:320px){.xs\:container{max-width:320px}}@media (min-width:320px) and (min-width:640px){.xs\:container{max-width:640px}}@media (min-width:320px) and (min-width:768px){.xs\:container{max-width:768px}}@media (min-width:320px) and (min-width:1024px){.xs\:container{max-width:1024px}}@media (min-width:320px) and (min-width:1280px){.xs\:container{max-width:1280px}}@media (min-width:320px) and (min-width:1351px){.xs\:container{max-width:1351px}}@media (min-width:320px){.xs\:flex-col{flex-direction:column}.xs\:h-84{height:22rem}.xs\:mb-6{margin-bottom:1.5rem}.xs\:py-8{padding-top:2rem;padding-bottom:2rem}.xs\:px-8{padding-left:2rem;padding-right:2rem}.xs\:w-full{width:100%}}@media (min-width:640px){.sm\:container{width:100%}}@media (min-width:640px) and (min-width:320px){.sm\:container{max-width:320px}}@media (min-width:640px) and (min-width:640px){.sm\:container{max-width:640px}}@media (min-width:640px) and (min-width:768px){.sm\:container{max-width:768px}}@media (min-width:640px) and (min-width:1024px){.sm\:container{max-width:1024px}}@media (min-width:640px) and (min-width:1280px){.sm\:container{max-width:1280px}}@media (min-width:640px) and (min-width:1351px){.sm\:container{max-width:1351px}}@media (min-width:768px){.md\:container{width:100%}}@media (min-width:768px) and (min-width:320px){.md\:container{max-width:320px}}@media (min-width:768px) and (min-width:640px){.md\:container{max-width:640px}}@media (min-width:768px) and (min-width:768px){.md\:container{max-width:768px}}@media (min-width:768px) and (min-width:1024px){.md\:container{max-width:1024px}}@media (min-width:768px) and (min-width:1280px){.md\:container{max-width:1280px}}@media (min-width:768px) and (min-width:1351px){.md\:container{max-width:1351px}}@media (min-width:768px){.md\:text-5xl{font-size:3rem}.md\:mb-12{margin-bottom:3rem}.md\:w-1\/2{width:50%}.md\:w-1\/3{width:33.333333%}}@media (min-width:1024px){.lg\:container{width:100%}}@media (min-width:1024px) and (min-width:320px){.lg\:container{max-width:320px}}@media (min-width:1024px) and (min-width:640px){.lg\:container{max-width:640px}}@media (min-width:1024px) and (min-width:768px){.lg\:container{max-width:768px}}@media (min-width:1024px) and (min-width:1024px){.lg\:container{max-width:1024px}}@media (min-width:1024px) and (min-width:1280px){.lg\:container{max-width:1280px}}@media (min-width:1024px) and (min-width:1351px){.lg\:container{max-width:1351px}}@media (min-width:1024px){.lg\:flex-row{flex-direction:row}.lg\:flex-1{flex:1 1 0%}.lg\:h-full{height:100%}.lg\:h-screen{height:100vh}.lg\:text-6xl{font-size:4rem}.lg\:overflow-hidden{overflow:hidden}.lg\:px-16{padding-left:4rem;padding-right:4rem}.lg\:py-32{padding-top:8rem;padding-bottom:8rem}.lg\:w-1\/2{width:50%}}@media (min-width:1280px){.xl\:container{width:100%}}@media (min-width:1280px) and (min-width:320px){.xl\:container{max-width:320px}}@media (min-width:1280px) and (min-width:640px){.xl\:container{max-width:640px}}@media (min-width:1280px) and (min-width:768px){.xl\:container{max-width:768px}}@media (min-width:1280px) and (min-width:1024px){.xl\:container{max-width:1024px}}@media (min-width:1280px) and (min-width:1280px){.xl\:container{max-width:1280px}}@media (min-width:1280px) and (min-width:1351px){.xl\:container{max-width:1351px}}@media (min-width:1351px){.xxlmin\:container{width:100%}}@media (min-width:1351px) and (min-width:320px){.xxlmin\:container{max-width:320px}}@media (min-width:1351px) and (min-width:640px){.xxlmin\:container{max-width:640px}}@media (min-width:1351px) and (min-width:768px){.xxlmin\:container{max-width:768px}}@media (min-width:1351px) and (min-width:1024px){.xxlmin\:container{max-width:1024px}}@media (min-width:1351px) and (min-width:1280px){.xxlmin\:container{max-width:1280px}}@media (min-width:1351px) and (min-width:1351px){.xxlmin\:container{max-width:1351px}}@media (min-width:1351px){.xxlmin\:w-1\/2{width:50%}}@media (max-width:1350px){.xxlmax\:container{width:100%}}@media (max-width:1350px) and (min-width:320px){.xxlmax\:container{max-width:320px}}@media (max-width:1350px) and (min-width:640px){.xxlmax\:container{max-width:640px}}@media (max-width:1350px) and (min-width:768px){.xxlmax\:container{max-width:768px}}@media (max-width:1350px) and (min-width:1024px){.xxlmax\:container{max-width:1024px}}@media (max-width:1350px) and (min-width:1280px){.xxlmax\:container{max-width:1280px}}@media (max-width:1350px) and (min-width:1351px){.xxlmax\:container{max-width:1351px}}@media (max-width:1350px){.xxlmax\:flex-col{flex-direction:column}.xxlmax\:w-full{width:100%}}code[class*=language-],pre[class*=language-]{text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;color:#c3cee3;background:#263238;font-family:Roboto Mono,monospace;font-size:1em;line-height:1.5em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none}code[class*=language-] ::-moz-selection,code[class*=language-]::-moz-selection,pre[class*=language-] ::-moz-selection,pre[class*=language-]::-moz-selection{background:#363636}code[class*=language-] ::selection,code[class*=language-]::selection,pre[class*=language-] ::selection,pre[class*=language-]::selection{background:#363636}:not(pre)>code[class*=language-]{white-space:normal;border-radius:.2em;padding:.1em}pre[class*=language-]{overflow:auto;position:relative;margin:.5em 0;padding:1.25em 1em}.language-css>code,.language-sass>code,.language-scss>code{color:#fd9170}[class*=language-] .namespace{opacity:.7}.token.atrule{color:#c792ea}.token.attr-name{color:#ffcb6b}.token.attr-value,.token.attribute{color:#c3e88d}.token.boolean{color:#c792ea}.token.builtin{color:#ffcb6b}.token.cdata,.token.char{color:#80cbc4}.token.class{color:#ffcb6b}.token.class-name,.token.color{color:#f2ff00}.token.comment{color:#546e7a}.token.constant{color:#c792ea}.token.deleted{color:#f07178}.token.doctype{color:#546e7a}.token.entity{color:#f07178}.token.function{color:#c792ea}.token.hexcode{color:#f2ff00}.token.id,.token.important{color:#c792ea;font-weight:700}.token.inserted{color:#80cbc4}.token.keyword{color:#c792ea;font-style:italic}.token.number{color:#fd9170}.token.operator{color:#89ddff}.token.prolog{color:#546e7a}.token.property{color:#80cbc4}.token.pseudo-class,.token.pseudo-element{color:#c3e88d}.token.punctuation{color:#89ddff}.token.regex{color:#f2ff00}.token.selector{color:#f07178}.token.string{color:#c3e88d}.token.symbol{color:#c792ea}.token.tag,.token.unit{color:#f07178}.token.url{color:#fd9170}.token.variable{color:#f07178}.nuxt-progress{position:fixed;top:0;left:0;right:0;height:2px;width:0;opacity:1;transition:width .1s,opacity .4s;background-color:#000;z-index:999999}.nuxt-progress.nuxt-progress-notransition{transition:none}.nuxt-progress-failed{background-color:red}html{font-family:"Source Sans Pro",-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif;font-size:16px;word-spacing:1px;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;box-sizing:border-box}*,:after,:before{box-sizing:border-box;margin:0}.nuxt-content p{margin-bottom:20px}.nuxt-content h2{font-weight:700;font-size:28px}.nuxt-content h3{font-weight:700;font-size:22px}.icon.icon-link{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNCAyNCIgd2lkdGg9IjI0IiBoZWlnaHQ9IjI0Ij48cGF0aCBjbGFzcz0iaGVyb2ljb24tdWkiIGQ9Ik0xMS4wMyA4aDMuOTRsMS4wNi00LjI0YTEgMSAwIDEgMSAxLjk0LjQ4TDE3LjAzIDhIMjBhMSAxIDAgMCAxIDAgMmgtMy40N2wtMSA0SDE4YTEgMSAwIDEgMSAwIDJoLTIuOTdsLTEuMDYgNC4yNWExIDEgMCAxIDEtMS45NC0uNDlsLjk0LTMuNzZIOS4wM2wtMS4wNiA0LjI1YTEgMSAwIDEgMS0xLjk0LS40OUw2Ljk3IDE2SDRhMSAxIDAgMCAxIDAtMmgzLjQ3bDEtNEg2YTEgMSAwIDAgMSAwLTJoMi45N2wxLjA2LTQuMjRhMSAxIDAgMSAxIDEuOTQuNDhMMTEuMDMgOHptLS41IDJsLTEgNGgzLjk0bDEtNGgtMy45NHoiLz48L3N2Zz4K);display:inline-block;width:20px;height:20px;background-size:20px 20px}.logo[data-v-4c237d0b]{height:40px}</style><link rel="preload" href="/_nuxt/static/1658299777/en/blog/updating-to-nuxt-bridge/state.js" as="script"><link rel="preload" href="/_nuxt/static/1658299777/en/blog/updating-to-nuxt-bridge/payload.js" as="script"><link rel="preload" href="/_nuxt/static/1658299777/manifest.js" as="script">
  </head>
  <body>
    <div data-server-rendered="true" id="__nuxt"><!----><div id="__layout"><div><article class="flex lg:h-screen w-screen lg:overflow-hidden xs:flex-col lg:flex-row"><div class="relative lg:w-1/2 xs:w-full xs:h-84 lg:h-full post-left bg-black"><img src="/img/nuxt-gem.png" alt="Updating to Nuxt Bridge" class="absolute h-full w-full object-cover"> <div class="overlay"></div> <div class="absolute top-32 left-32 text-white"><div class="flex"><a href="/en" class="nuxt-link-active"><img src="/_nuxt/img/logo_green_e.ce34004.svg" alt="Epigno Logo" class="logo" data-v-4c237d0b></a> <h1 class="font-bold text-xl py-1 px-3"><a href="/en" class="nuxt-link-active">Epigno Tech Blog</a></h1></div> <div class="mt-16 -mb-3 flex uppercase text-sm"><p class="mr-3">
          May 15, 2022
        </p> <span class="mr-3">•</span> <p>Nathaniel Nasarow</p></div> <h1 class="text-4xl mt-2 md:text-5xl lg:text-6xl font-bold">
        Updating to Nuxt Bridge
      </h1> <span><a href="/en/blog/tag/nuxtjs"><span class="truncate uppercase tracking-wider font-medium text-ss px-2 py-1 rounded-full mr-2 mb-2 border border-light-border dark:border-dark-border transition-colors duration-300 ease-linear">
            nuxtjs
          </span></a></span><span><a href="/en/blog/tag/bridge"><span class="truncate uppercase tracking-wider font-medium text-ss px-2 py-1 rounded-full mr-2 mb-2 border border-light-border dark:border-dark-border transition-colors duration-300 ease-linear">
            bridge
          </span></a></span></div> <div class="flex absolute top-3rem right-3rem"><a href="https://epigno.jp" class="mr-8 self-center text-white font-bold hover:underline">
        Epigno
      </a> </div></div> <div class="relative xs:py-8 xs:px-8 lg:py-32 lg:px-16 lg:w-1/2 xs:w-full h-full overflow-y-scroll markdown-body post-right custom-scroll"><h1 class="font-bold text-4xl">Updating to Nuxt Bridge</h1> <div class="nuxt-content"><p>In my last article, I wrote about the challenges I encountered with switching state management systems, from Vuex to Pinia. You can read that here in case you're interested: <a href="https://blog.epigno.jp/en/blog/challenges-with-switching-to-pinia/" rel="nofollow noopener noreferrer" target="_blank">Challenges switching to Pinia</a></p>
<p>The switch to Pinia (or, at the least the attempt to switch) is related because Nuxt does wish to support Pinia in Nuxt three, as well as Nuxt Bridge. My coworker Olivier and I thought that switching to Pinia may make the upgrade to Nuxt Bridge easier. In the end, we decided not to use Pinia, but I'm not sure it would have made much of a difference either way.</p>
<p>This article will serve as documentation for the upgrade path to Nuxt Bridge from a Nuxt JS project using Vue2 and the Options API. I hope it will also help others who may be struggling with upgrading to Nuxt Bridge and, eventually, Nuxt 3.</p>
<p>As Mario would say, <em>Here we go!</em></p>
<h2 id="first-steps"><a href="#first-steps" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>First steps</h2>
<p>Going off of the <a href="https://v3.nuxtjs.org/bridge/overview/" rel="nofollow noopener noreferrer" target="_blank">Nuxt Bridge migration guide</a> we must first remove any <code>package-lock.json</code> or <code>yarn.lock</code> files (why, I'm not sure, but that's what the docs state, so that's what we do). In our case, we use <code>package.json</code> for adding new dependencies, so we need to remove <code>nuxt</code> and add <code>nuxt-edge</code>.</p>
<div class="nuxt-content-highlight"><pre class="language-text line-numbers"><code>- "nuxt": "^2.15.0"
+ "nuxt-edge": "latest"
</code></pre></div>
<p>Then run <code>yarn install</code></p>
<p>After we test our <code>dev</code> and <code>production</code> builds, we need to then add the nuxt bridge dependency. We use <code>yarn</code>, so we'll run the command:</p>
<p><code>yarn add --dev @nuxt/bridge@npm:@nuxt/bridge-edge</code></p>
<h2 id="nuxi-cli-command-and-updating-scripts"><a href="#nuxi-cli-command-and-updating-scripts" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Nuxi CLI command and updating scripts</h2>
<p>At first, I had no idea why Nuxt decided to switch from the <code>nuxt</code> CLI command to <code>nuxi</code>. Seemed a little strange.</p>
<p>It comes down to the fact that you can, in fact, still run the <code>nuxt</code> command to run your local nuxt server. In order to utilize Nuxt Bridge, we have to update our scripts to use <code>nuxt</code> instead of <code>nuxt</code>.</p>
<p>In our case, we have scripts such as this:</p>
<div class="nuxt-content-highlight"><pre class="language-text line-numbers"><code>"dev": "cross-env NODE_ENV=development nuxt",
</code></pre></div>
<p>Which needs to be changed to something like this:</p>
<div class="nuxt-content-highlight"><pre class="language-text line-numbers"><code>"dev": "cross-env NODE_ENV=development nuxi dev",
</code></pre></div>
<p>Here is the <a href="https://v3.nuxtjs.org/bridge/overview/#nuxi" rel="nofollow noopener noreferrer" target="_blank">official documentation</a></p>
<h1 id="and-now-the-problems"><a href="#and-now-the-problems" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>And now the problems</h1>
<p>Normally, this is where I would test things; run <code>yarn install</code> or <code>yarn</code>, then run <code>yarn dev</code> and see if it works. But it won't, because we haven't updated our <code>nuxt.config.js</code> file yet.</p>
<p>To give you an example, if you run <code>nuxi dev</code> right now before updating the config file, you'll have error like this:</p>
<div class="nuxt-content-highlight"><pre class="language-text line-numbers"><code>Nuxt CLI v3.0.0-rc.2-27530889.9e5a3cd                                                          09:39:39
                                                                                               09:39:39
  > Local:    http://localhost:3000/
  > Network:  http://##.##.###.###:3000/


 ERROR  Cannot start nuxt:  Cannot read properties of undefined (reading 'callHook')           09:39:41

  at load (node_modules/nuxi-edge/dist/chunks/dev.mjs:6735:33)
  ...

</code></pre></div>
<p>This was actually an error very similar to the one i received when I first attempted to upgrade directly from Nuxt.js to Nuxt 3. The reason is the config file.</p>
<p>Going back to the <a href="https://v3.nuxtjs.org/bridge/overview/#update-nuxtconfig" rel="nofollow noopener noreferrer" target="_blank">documentation</a>, we see that we need to import and use <code>defineNuxtConfig</code>:</p>
<div class="nuxt-content-highlight"><pre class="language-text line-numbers"><code>import { defineNuxtConfig } from '@nuxt/bridge'

export default defineNuxtConfig({
  // Your existing configuration
})
</code></pre></div>
<p>However, in our case we still receive an error:</p>
<div class="nuxt-content-highlight"><pre class="language-text line-numbers"><code>FATAL  Please remove @nuxt/typescript-build from buildModules or set bridge.typescript: false to avoid conflict with bridge.

  at setupTypescript (node_modules/@nuxt/bridge/dist/chunks/module.mjs:1173:11)
  ...
</code></pre></div>
<p>So, what's interesting is that the documentation does not explicityly state that this is an optional parameter that you can pass. It does tell you to remove typescript modules though.</p>
<p>So, if you are attempting to upgrade, make sure you go through each step of the upgrade process. Step by step. Don't try to test each individual step like I did, or you'll give yourself a headache.</p>
<h2 id="remove-incompatible-and-obsolete-modules"><a href="#remove-incompatible-and-obsolete-modules" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Remove incompatible and obsolete modules</h2>
<p>We only had the <code>typescript-build</code> module, so we remove this from our dependencies.</p>
<blockquote>
<p>Remove @nuxt/typescript-build: Bridge enables same functionality</p>
</blockquote>
<div class="nuxt-content-highlight"><pre class="language-text line-numbers"><code>- "@nuxt/typescript-build": "^2.0.3",
</code></pre></div>
<p>We at Epigno do not use the <code>composition-api</code>, but you will have to remove it if you use it in your project. Note, that you may have an issue here if you are using <code>pinia</code>, since I'm petty sure that pinia actually requires the composition-api as a dependency.</p>
<p>Also, make sure you update your <code>.gitignore</code> file.</p>
<div class="nuxt-content-highlight"><pre class="language-text line-numbers"><code># Nitro folder
.output
</code></pre></div>
<h2 id="update-your-nuxtconfig-file"><a href="#update-your-nuxtconfig-file" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Update your nuxt.config file!</h2>
<p>Remember that you might have something in your config file that is looking for the old modules that you removed! So you need to remove these from your config. In our case, it was <code>typescript-build</code> in our build-modules configuration.</p>
<div class="nuxt-content-highlight"><pre class="language-text line-numbers"><code>- buildModules: ['@nuxt/typescript-build', '@aceforth/nuxt-optimized-images'],

+ buildModules: ['@aceforth/nuxt-optimized-images'],
</code></pre></div>
<p>After running <code>yarn</code>, we can run <code>yarn dev</code> (or <code>nuxi dev</code>) and our project is up and running!</p>
<h2 id="but-now-we-have-other-issues"><a href="#but-now-we-have-other-issues" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>But now we have other issues</h2>
<p>First, it's important to note that I have been building and testing this repository on both Linux and MacOS. The results are <em>mostly</em> the same. I will note what differences there are, if any.</p>
<h3 id="an-almost-infinite-loop"><a href="#an-almost-infinite-loop" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>An (almost) Infinite Loop</h3>
<p>When I run <code>yarn dev</code>, the config file will run <code>nuxi dev</code>. Everything seems to be running OK!</p>
<p>However, when I open the browser (Google Chrome as usual) and enter the localhost address (127.0.0.1:3000), the terminal will show that there is an infinite loop as it looks for a variable.</p>
<div class="nuxt-content-highlight"><pre class="language-text line-numbers"><code> $axios.onError
 [Vue warn] Error in render: "TypeError: Cannot read properties of null (reading 'name')"
 Error: Request failed with status code 401
     at createError (/frontend/node_modules/axios/lib/core/createError.js:16:15)
     at settle (/frontend/node_modules/axios/lib/core/settle.js:17:12)
     at IncomingMessage.handleStreamEnd (/frontend/node_modules/axios/lib/adapters/http.js:269:11)
     at IncomingMessage.emit (node:events:402:35)
     at endReadableNT (node:internal/streams/readable:1343:12)
     at processTicksAndRejections (node:internal/process/task_queues:83:21) {
   config: {
     url: '/auth',

...

</code></pre></div>
<p>There is a whole stack trace and it just continues to loop over and over again. This <em>only</em> appears to happen when you go directly to <code>127.0.0.1:3000</code>.</p>
<p>When this first happened, I decided to just let it run in the background. Eventually it did stop, and returned a 404 error.</p>
<p><img alt="Initial 404 Error" src="/img/nuxtBridge/initial404Error.png" title="Initial 404 Error"></p>
<p>If I tried typing in the address again, I would get a page that displayed a 503 error:</p>
<p><img alt="503 Server Error" src="/img/nuxtBridge/503ServerError.png" title="503 Server Error"></p>
<p>Looking at the terminal window, the stack trace eventually reveals that the user is "Unauthenticated"</p>
<div class="nuxt-content-highlight"><pre class="language-text line-numbers"><code>...

data: { message: 'Unauthenticated.' }
  },
  isAxiosError: true,
  toJSON: [Function: toJSON]
}
$axios.onError

</code></pre></div>
<p>So I suspect that there must be something wrong with <code>auth</code> or redirection, which wasn't a problem in NuxtJS.</p>
<h3 id="difference-between-linux-and-macos"><a href="#difference-between-linux-and-macos" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Difference between Linux and MacOS</h3>
<p>In MacOS, the infinite loop seems to be a true infinite loop; it never crashes, the server never stops, and I never receive any server error. However, the loop continues even if I manually navigate successfully to <code>127.0.0.1:3000/login</code>.</p>
<h3 id="related-issues"><a href="#related-issues" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Related issues?</h3>
<p>Some research reveals that there may actually be a problem with Nuxt Bridge and compatibility with NuxtJS/Auth package, though the users have different problems.</p>
<p>Links: <a href="https://github.com/nuxt-community/auth-module/issues/1519#issuecomment-1112153311" rel="nofollow noopener noreferrer" target="_blank">https://github.com/nuxt-community/auth-module/issues/1519#issuecomment-1112153311</a></p>
<h3 id="other-errors"><a href="#other-errors" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Other errors</h3>
<p>There are occasions where the authentication error just happens at random, causing the infinite loop problem.</p>
<p>Also, occasionally I would get a write error:</p>
<p>In the browser:</p>
<div class="nuxt-content-highlight"><pre class="language-text line-numbers"><code>{
  "statusCode": 500,
  "statusMessage": "H3Error",
  "stack": []
}
</code></pre></div>
<p>In the terminal we see the following:</p>
<div class="nuxt-content-highlight"><pre class="language-text line-numbers"><code>ERROR  [h3] write EPIPE

at afterWriteDispatched (node:internal/stream_base_commons:164:15)
at writeGeneric (node:internal/stream_base_commons:155:3)
at Socket._writeGeneric (node:net:795:11)
at Socket.connect (node:net:777:12)
at Object.onceWrapper (node:events:509:28)
at Socket.emit (node:events:402:35)
at Socket.emit (node:domain:475:12)
at PipeConnectWrap.afterConnect [as oncomplete] (node:net:1147:10)

</code></pre></div>
<p>I had no idea what this was! However, I did find two github issues, one closed and one that was opened a couple weeks ago.</p>
<p>First issue (Closed): <a href="https://github.com/nuxt/framework/issues/4085" rel="nofollow noopener noreferrer" target="_blank">https://github.com/nuxt/framework/issues/4085</a></p>
<p>Second issue (Open): <a href="https://github.com/nuxt-community/tailwindcss-module/issues/471" rel="nofollow noopener noreferrer" target="_blank">https://github.com/nuxt-community/tailwindcss-module/issues/471</a></p>
<h2 id="css-loading-problem"><a href="#css-loading-problem" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>CSS loading problem</h2>
<p>A separate issue is a problem loading the CSS correctly.</p>
<p>Upon any initial page load, the CSS styling does not get preloaded. So, the user will see a flash of unstyled HTML elements, images, etc, for just a moment before the styles are loaded and set.</p>
<p>I have tried importing the style sheet directly, but this did absolutely nothing.</p>
<p>This appears to be an ongoing issue. You can read more about it here: <a href="https://github.com/nuxt/bridge/issues/26" rel="nofollow noopener noreferrer" target="_blank">https://github.com/nuxt/bridge/issues/26</a></p>
<h1 id="conclusion"><a href="#conclusion" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Conclusion</h1>
<p>Unfortunately, as it stands, upgrading to Nuxt Bridge is a total non-starter for the Epital project. Two things need to be fixed before we could consider releasing this into production:</p>
<ol>
<li>Nuxt Auth needs to work out of the box, or a replacement needs to be recommended</li>
<li>CSS processing needs to be updated and fixed</li>
</ol>
<p>For now, it seems like we are stuck using the current version of NuxtJS and Vue2. Although the Nuxt team seems to beleive that Nuxt Bridge is stable and should allow current users of NuxtJS / Vue2 to be able to upgrade, it obviously still has some issues. Hopefully they can be addressed soon.</p>
<p>Due to these issues, Epigno will continue to use NuxtJS, Vuex, and Vue2 for the foreseeable future.</p></div> <div class="w-full px-2 xs:mb-6 md:mb-12 article-card"><a href="/en/blog/author/nasarow" class="flex transition-shadow duration-150 ease-in-out shadow-sm hover:shadow-md xxlmax:flex-col"><img src="/img/authors/pic-nasarow.jpg" class="h-48 xxlmin:w-1/2 xxlmax:w-full object-cover"> <div class="flex flex-col m-4"><h4 class="font-semibold">Author</h4> <p>Nathaniel Nasarow</p> <p>Engineer at Epigno</p></div></a></div> <div class="flex justify-between mt-8"><a href="/en/blog/challenges-with-switching-to-pinia" class="text-primary font-bold hover:underline">
    Challenges with switching to Pinia.
  </a> <span> </span></div> <footer class="flex justify-center border-gray-500 border-t-2"><p class="mt-4"><a href="https://epigno.jp" class="font-bold hover:underline"> Epigno </a></p></footer></div></article></div></div></div><script defer src="/_nuxt/static/1658299777/en/blog/updating-to-nuxt-bridge/state.js"></script><script src="/_nuxt/039edcf.js" defer></script><script src="/_nuxt/9c14ffb.js" defer></script><script src="/_nuxt/8727830.js" defer></script><script src="/_nuxt/f8df8b6.js" defer></script><script src="/_nuxt/e65a8ff.js" defer></script>
  </body>
</html>
